W$LICENSE="Weaveworld Public License v1.0, Copyright(c)2018-2019, Csaba Veg, All rights reserved.\nPermission to USE and/or REDISTRIBUTE this software in UNMODIFIED forms, in source and/or binary distributions, for any purpose with or without fee is hereby granted, provided that the above copyright notice and this permission notice appear in all copies.\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.";
String.prototype.startsWith||(String.prototype.startsWith=function(a,b){var c=b||0,d=a.length;if(c+d>this.length)return!1;for(var e=0;e<d;++e,++c)if(a.charAt(e)!=this.charAt(c))return!1;return!0});String.prototype.endsWith||(String.prototype.endsWith=function(a,b){var c=b||this.length,d=a.length;if(c<d)return!1;for(;0<=--d;)if(--c,a.charAt(d)!=this.charAt(c))return!1;return!0});Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;c<d;++c)a.call(b,this[c],c,this)});
function w$derive(a,b){a.prototype&&a.prototype.isPrototypeOf(b)||Object.setPrototypeOf(b,a);return b}
function w$assign(a,b,c,d){var e,g=!1;if(null==b||"object"!=typeof b)return b;"boolean"==typeof c&&(g=c,c=d);if(c)for("string"==typeof c&&(c=c.split(",")),d=0;d<c.length;++d){var h=c[d],l=h;-1!=(e=h.indexOf(":"))&&(l=h.substring(0,e),h=h.substring(e+1));e=b[h];if(g?null!=e:"undefined"!=typeof e)a[l]=e}else for(h in b)b.hasOwnProperty(h)&&(e=b[h],(g?null!=e:"undefined"!=typeof e)?a[h]=e:delete a[h]);return a}
function w$is(a,b){a=a&&("undefined"==typeof a.length||0<a.length);return 1===b?a?1:0:"string"==typeof b?a?b:null:a?!0:!1}function w$toggle(a,b){"0"===a?a=0:"1"===a?a=1:"true"===a?a=!0:"false"===a?a=!1:"string"==typeof a&&a===b&&(a=!0);return w$is(!a,b)}function w$isElements(a){return a&&(a instanceof HTMLCollection||Array.isArray(a))}function w$oneOrMore(a,b){return null===b?0==a:a<b}function w$isArray(a){return"object"==typeof a&&a&&(Array.isArray(a)||a.$w$isArray)}
function w$query(a,b,c){var d=!1,e=0,g=b||document,h=!1;if(a)if("object"==typeof a){h=w$isElements(a);var l=a}else{if(-1!=a.indexOf(";")){var k=a.split(";");l=[];h=!0}if(c||w$isElements(g))l=[],h=!0;for(var m=Array.isArray(k)?k.length:null,n=0;w$oneOrMore(n,m);++n){null!==m&&(a=k[n]);d=!1;e=0;if(a.startsWith(" "))d=!1,a=a.substring(1);else if(a.startsWith("##"))d=!0,e=2;else if(a.startsWith("#")){d=!0;for(var f=e=1;f<a.length;++f){var q=a.charAt(f);if(!("a"<=q&&"z">=q||"A"<=q&&"Z">=q||f>e&&("0"<=
q&&"9">=q||"_"==q||"-"==q))){d=!1;break}}}else a.startsWith("=")&&(a="*[name='"+a.substring(1)+"']");q=g instanceof HTMLCollection||Array.isArray(g)?z.length:"1";for(var t=-1;++t<q;){var z="number"==typeof q?g[t]:g;if(0==a.indexOf(">"))(f=function r(a,f,b){var d=a.indexOf(">"),e=(-1!=d?a.substring(0,d):a).split("."),q=0;a:for(;q<f.children.length;++q){var m=f.children[q];if(!e[0]||"*"==e[0]||e[0].toUpperCase()==m.nodeName){for(var n=1;n<e.length;++n)if(!m.classList.contains(e[n]))continue a;if(-1!=
d)return r(a.substring(d+1),m,b);Array.isArray(b)&&b.push(m);if(!c)return m}}return null}(a.substring(1),b,l))&&!h&&(l=f);else if(d)f=document.getElementById(a.substring(e)),h?l.push(f):l=f;else if(h){var v=z.querySelectorAll(a);for(f=0;f<v.length;++f)l.push(v[f])}else l=z.querySelector(a)}if(!h)break}}else l=g;c?w$isElements(l)||(l=l?[l]:[]):w$isElements(l)&&(l=l.length?l[0]:null);if("function"==typeof c)for(f=0;f<l.length;++f)c(l[f]);return l}
function w$queryAll(a,b,c){return w$query(a,b,c||!0)}
function w$show(a,b){b==WEAVEWORLD.W$TOGGLE&&(b=!w$show(a));if("undefined"==typeof b)return"none"!=window.getComputedStyle(a).display;if(b)return"none"==window.getComputedStyle(a).display&&(a.style.display=a.$w&&a.$w.$styleDisplay?a.$w.$styleDisplay:/^(address|blockquote|body|center|dir|div|dl|fieldset|form|h[1-6]|hr|isindex|menu|noframes|noscript|ol|p|pre|table|ul|dd|dt|frameset|li|tbody|td|tfoot|th|thead|tr|html)$/i.test(a.nodeName)?"block":"inline"),!0;var c;(a.$w||(a.$w={})).$styleDisplay||"none"==
(c=window.getComputedStyle(a).display)||(a.$w.$styleDisplay=c);a.style.display="none";return!1}function w$attribute(a,b){var c=a.getAttribute(b);return null!=c?c:a.hasAttribute(b)?"":null}
function w$element(a,b,c){if("string"==typeof a){if(!a||"#text"==a)return document.createTextNode(b);a=document.createElement(a)}var d=a,e=w$isElements(a)?a.length:null;if("string"==typeof b)for(var g=0;w$oneOrMore(g,e);++g){var h=b,l;null!==e&&(a=d[i]);"w:text"==h?a.textContent=c||"":"w:html"==h?a.innerHTML=c||"":h.startsWith(l="w:set:")?a[h.substring(l.length)]=c:h.startsWith(l="w:data:")?(h="data-"+h.substring(l.length),null!=c?a.setAttribute(h,c):a.removeAttribute(h)):h.startsWith(l="w:style:")?
(h=h.substring(l.length),null!=c?a.style[h]=c:a.removeStyle(h)):"w:show"==h?w$show(a,c):(h.startsWith("@")&&(h=h.substring(1)),h.startsWith(l="w:attr:")&&(h=h.substring(l.length)),null!=c?a.setAttribute(h,c):a.removeAttribute(h))}else if("object"==typeof b)for(g=0;w$oneOrMore(g,e);++g)for(h in null!==e&&(a=d[g]),b)w$element(a,h,b[h]);return a}
function w$defineElement(a,b,c){if(b){var d=b,e,g={};w$isArray(b)||(d=b.replace(/;;/g,"\n").split("\n"));for(b=0;b<d.length;++b)if((e=d[b].trim())&&"#"!=e.charAt(0)){var h=e,l=e,k;-1!=(k=e.indexOf("="))&&(h=e.substring(0,k),l=e.substring(k+1));g[h]=l;"@"==h.charAt(0)?"object"==typeof a&&a&&w$element(a,h.substring(1),l):-1==h.indexOf(".@")&&c&&c(a,h,l)}return g}}
function w$defineSelect(a,b,c){var d=w$defineElement(null,b);a.innerHTML="";w$defineElement(a,b,function(b,g,h){b=g+".@";h=a.appendChild(w$element("option",{"w:set:value":g,"w:text":h}));c==g&&(h.selected=!0);for(var e in d)e.startsWith(b)&&w$element(h,e.substr(b.length),d[e])});return a}
function w$radioClick(a){var b=a.target;if("INPUT"==b.nodeName&&"radio"==b.type)return a.stopPropagation(),a.cancelBubble=!0;w$queryAll("input[type='radio']",b.parentElement,function(a){a.checked=!0});return w$no(a)}
function w$defineRadio(a,b,c,d,e){var g=w$defineElement(null,c);a.innerHTML="";w$defineElement(a,c,function(c,l,k){c=l+".@";var m=a.appendChild(w$element("span",{"class":"wradio",style:"white-space:nowrap;",onclick:"return w$radioClick(event,this)"})),n=m.appendChild(w$element("input",{type:"radio",name:b,value:l}));d==l&&(n.checked=!0);m.appendChild(w$element("span",{"w:text":k}));for(var f in g)f.startsWith(c)&&w$element(m,f.substr(c.length),g[f]);e&&e.call(this,m)});return a}
function w$removeElement(a){a.parentElement&&(a.parentElement.removeChild(a),a.parentElement=null)}function w$hasWarning(a){if(a)for(var b=Object.getOwnPropertyNames(a),c=0;c<b.length;++c){var d=b[c];if((d.startsWith("_w_")||"_w"==d||d.endsWith("$warning"))&&a[d])return!0}return!1}
function w$warning(a,b){a instanceof HTMLElement&&(a=w$data(a));if(a){if(b){var c=Object.getOwnPropertyNames(b);for(var d=!1,e=0;e<c.length;++e){h=c[e];var g;if(h.startsWith(g="_w_")||h==(g="_w"))d=(d=b[h])?w$say(d,d):void 0,a[h.substring(g.length)+"$warning"]=d,d=!0;else if(h.startsWith(g="_m_")||h==(g="_m"))d=(d=b[h])?w$say(d,d):void 0,a[h.substring(g.length)+"$message"]=d,d=!0}return d}Object.getOwnPropertyNames(a);for(var h in a)if(h.endsWith("$warning")||h.endsWith("$message"))a[h]=void 0}}
function w$check(a,b){if(a){a instanceof Event&&(a=a.target);var c,d,e;a.checkValidity&&a.checkValidity();if((c=a.getAttribute("name"))&&(d=w$data(a))){var g;"undefined"==typeof b&&(b=w$get(a));if("undefined"!=typeof b){var h=c+"$warning";"function"==typeof(g=d[c+"$check"])?e=g.call(d,a,b):"function"==typeof(g=d[c+"$valid"])&&(e=g.call(d,b));d[h]!=e&&(d[h]=e||void 0)}}return e}}
function w$checkArg(a,b,c,d){var e=a,g;if(!c)return null;a instanceof Event&&(a=a.target);a instanceof HTMLElement&&(e=w$data(a));if(!d&&a instanceof HTMLElement&&"function"==typeof(g=e[(b||"")+"$check"]))a=g.call(e,a,c);else if(d||"function"!=typeof(g=e[(b||"")+"$valid"])){d=Object.getOwnPropertyNames(c);a={};for(var h=0;h<d.length;++h){var l=d[h];if(b&&"function"==typeof(g=e[b+"$"+l+"$valid"])){var k=g.call(e,c[l]);a["_w_"+l]=k||void 0}else"function"==typeof(g=e[l+"$valid"])&&(k=g.call(e,c[l]),
a["_w_"+l]=k||void 0)}}else a=g.call(e,c);return"string"==typeof a?a?{_w:a}:null:"object"!=typeof a||0===Object.keys(a).length&&a.constructor===Object?null:a}function w$hasAncestor(a,b){for(;a&&a!=document;a=a.parentElement)if(a==b)return!0;return!1}
function w$find(a,b,c){"string"==typeof a&&(a=w$query(a));var d;if("string"==typeof b)if(-1==(d=b.lastIndexOf("."))){var e=b;b=null}else e=b.substring(0,d),b=b.substring(d+1);a&&c&&(a=a.parentElement);for(;a&&a!=document;a=a.parentElement)if(c=a.classList,(!e||e==a.nodeName)&&c&&c.length)if("string"==typeof b){if(c.contains(b))return a}else for(d=0;d<b.length;++d)if(c.contains(b[d]))return a;return null}
function w$selectAll(a,b){if(a instanceof HTMLElement){var c=window.getSelection();c.removeAllRanges();if("INPUT"==a.nodeName)a.focus(),a.setSelectionRange(0,a.value.length);else{var d=document.createRange();d.selectNodeContents(a);c.addRange(d)}}else if(a instanceof Event){d=a.target;var e=document.activeElement==d||(c=window.getSelection())&&c.baseNode==d;e||"DIV"!=d.nodeName||"true"==d.getAttribute("contenteditable")||(e=!0);if(!e&&(w$selectAll(d),!b))return w$no(a)}}
function w$getParameters(a,b){null==b&&(b=window.location.search);a||(a={});b.startsWith("?")&&(b=b.substring(1));if(b)for(var c=b.split("&"),d=0;d<c.length;++d){var e=c[d].split("="),g=decodeURIComponent(e[0]),h;e=null==e[1]?null:decodeURIComponent(e[1]);g in a?w$isArray(h=a[g])?h.push(e):a[g]=[h,e]:a[g]=e}return a}
function w$setParameters(a,b){null==b&&(b=window.location.href);var c,d="";-1!=(c=b.indexOf("?"))&&(d=b.substring(c),b=b.substring(0,c));c=w$assign(w$getParameters({},d),a);d="";var e="?",g;for(g in c){var h=c[g];"undefined"!=typeof h&&(d+=e+g,null!=h&&(d+="="+encodeURIComponent(c[g])),e="&")}return b+d}function w$setCookie(a,b,c){var d="; expires=0";c&&(d="; expires="+(new Date(Date.now()+864E5*c)).toGMTString());document.cookie=a+"="+b+d+"; path=/"}
function w$getCookie(a,b){for(var c=a+"=",d=document.cookie.split(";"),e=0;e<d.length;++e){for(var g=d[e];g.startsWith(" ");)g=g.substring(1);if(g.startsWith(c))return g.substring(c.length)}return b}
function w$get(a,b){"string"==typeof a&&(a=w$query(id,b));if(a){if("FORM"==a.nodeName){for(var c={},d=0;d<a.elements.length;++d){var e=a.elements[d],g;("INPUT"==e.nodeName&&"submit"!=e.type&&"reset"!=e.type&&"button"!=e.type||"SELECT"==e.nodeName||"TEXTAREA"==e.nodeName)&&"undefined"!=typeof(g=w$get(e))&&(c[e.name]=g)}return c}if("INPUT"==a.nodeName){if("checkbox"==a.type||"radio"==a.type){if(a.checked)return a.value;return}return a.value}if("SELECT"==a.nodeName){c=void 0;e="";for(d=0;d<a.length;++d)a.options[d].selected&&
(c=(c||"")+e+a.options[d].value,e=",");return c}return"TEXTAREA"==a.nodeName?a.value:a.innerHTML}return null}
function ASync(){this.queue=[];this.locked=!1;this.exec=function(a,b,c){if("string"==typeof b){var d=this;this.exec(function(){d.locked=!0;var e=c||new Image;e.onload=function(){try{a&&a(e)}finally{d.locked=!1}};e.onerror=function(){d.locked=!1};e.src=b})}else this.queue.push(a),this.queueID||(this.queueID=requestAnimationFrame(this.sync.bind(this)))};this.sync=function(a){a=this.queue;if(a.length){if(!this.locked){a=a.shift();try{a()}catch(b){console.log("async exception:",b)}}this.queueID=requestAnimationFrame(this.sync.bind(this))}else this.queueID=
null}}function w$glass(a){if(a)if(a=WEAVEWORLD.w$glass)w$show(a,!0);else{WEAVEWORLD.w$glass=w$element("div",{"class":"wglass"});document.body.insertBefore(WEAVEWORLD.w$glass,document.body.firstElementChild);a="click mouseup mousedown keydown keypress keyup".split(" ");for(var b=0;b<a.length;++b)WEAVEWORLD.w$glass.addEventListener(a[b],w$no,!0)}else WEAVEWORLD.w$glass&&(w$removeElement(WEAVEWORLD.w$glass),WEAVEWORLD.w$glass=null);return WEAVEWORLD.w$glass}
function w$ajax(a){if("undefined"!=typeof XMLHttpRequest)var b=new XMLHttpRequest;else for(var c="MSXML2.XmlHttp.6.0 MSXML2.XmlHttp.5.0 MSXML2.XmlHttp.4.0 MSXML2.XmlHttp.3.0 MSXML2.XmlHttp.2.0 Microsoft.XmlHttp".split(" "),d=0;d<c.length;d++)try{b=new ActiveXObject(c[d]);break}catch(k){}a.async||w$glass(!0);b.onreadystatechange=function(){if(4==b.readyState){if(200==b.status){var c=b.responseText;w$glass();(b.getResponseHeader("Content-Type")||"").startsWith("application/json")&&(c=JSON.parse(c));
a.success&&a.success(c,a)}else a.error&&a.error(b);a.loop&&!WEAVEWORLD["@end"]&&requestAnimationFrame(a.loop)}};a.withCredentials&&(b.withCredentials=!0);c=a.data||{};d=a.method||"GET";var e="";if("GET"==d||"POST"==d){var g="GET"==d?"?":"";for(var h in c){var l;"undefined"!=typeof(l=c[h])&&(e+=g+encodeURIComponent(h),null!=l&&(e+="="+encodeURIComponent(c[h])),g="&")}c=e;g="application/x-www-form-urlencoded; charset=UTF-8"}else"object"==typeof c&&(c=JSON.stringify(c),g="application/json; charset=UTF-8");
d.endsWith(".json")&&(d=d.substring(0,d.length-5));"GET"==d?(b.open("GET",(a.url||"")+e,void 0!==a.async?a.async:!0),b.setRequestHeader("Pragma","W$CALL"),b.send()):(b.open(d,a.url||"",void 0!==a.async?a.async:!0),b.setRequestHeader("Pragma","W$CALL"),g&&b.setRequestHeader("Content-type",g),b.send(c))}
function W$CALL(a){var b="string"==typeof a?1:0,c=arguments[b+0],d=arguments[b+1],e=arguments[b+2];b=arguments[b+3];"function"==typeof d?d={success:d}:"string"==typeof d?d={w:d}:d instanceof HTMLElement?d={w$element:d}:d||(d={});null!=e&&(d.w$cmd=e);"undefined"!=typeof b&&(d.weave$data=b);d.method||(d.method="POST.json");d.url||(d.url=location.pathname);d.error||(d.error=WEAVEWORLD.w$ajax$error);d.success||(d.success=WEAVEWORLD.w$receive);null==c?(d.url=".w.htm",c={"!@":WEAVEWORLD["@time"]},d.loop=
W$SYNC,d.async=!0):"string"==typeof c&&(e=c,c={},c[e]="");"string"==typeof a?(d.data={},-1!=(b=a.indexOf(":"))?(d.method=a.substring(0,b),d.url=a.substring(b+1)):d.data[a]="",w$assign(d.data,c)):d.data=c;!d.w$element||d.w$cmd&&d.w$cmd.startsWith("~")||w$warning(d.w$element);w$ajax(d)}function w$wmenuOff(a){for(var b=WEAVEWORLD.menuStack;b.length&&b[b.length-1]!=a;)w$removeElement(b.pop())}
function w$wmenuShow(a,b,c,d,e,g,h,l){var k=void 0;"string"==typeof b&&(b=document.getElementById(b),b=b.cloneNode(!0),b.removeAttribute("id"));b.$w||(b.$w={});b.$w.parent=a;h&&(k=h(a,b,c,d,e,g));b.classList.remove("w");WEAVEWORLD.menuStack.push(b);for(h=0;h<b.children.length;++h){var m=b.children[h];m.classList.contains("wmenuitem")&&(m.classList.remove("wmenuitem-selected"),m.onmouseover=function(c){var f=c.target;w$no(c);for(c=0;c<b.children.length;++c){var d=b.children[c];d.classList.contains("wmenuitem")&&
d!=f&&d.classList.remove("wmenuitem-selected")}f.classList.add("wmenuitem-selected");c=f.getBoundingClientRect();for(d=0;d<f.children.length;++d){var e=f.children[d];if(e.classList.contains("wmenu")){w$wmenuShow(a,e.cloneNode(!0),c.right-2,c.left,c.top,c.bottom,null,l);break}}},m.onclick=function(b){w$no(b);var f=b.currentTarget;if(f.classList.contains("disable"))return!1;for(var c=f.getBoundingClientRect(),d=0;d<f.children.length;d++){var e=f.children[d];if(e.classList.contains("wmenu"))return w$wmenuShow(a,
e.cloneNode(!0),c.right-5,c.left,c.top,c.bottom,null,l),!1}f.getAttribute("w:on:menu");c={};var m;null!=(m=w$attribute(f,"w:checked"))&&(c[w$findName(f)||"value"]=m);w$on(b,"menu",null,c);w$wmenuOff()})}b.onmouseout=function(a){w$no(a);a=a.relatedTarget||document.activeElement;if(b.classList.contains("wmenuM"))return!1;for(;null!=a&&!a.classList.contains("wmenu");)a=a.parentElement;w$wmenuOff(a)};"undefined"==typeof k&&(b.style.position="absolute",b.style.display="inline-block",b.style.left=(c+=window.pageXOffset)+
"px",b.style.top=(e+=window.pageYOffset)+"px",document.body.appendChild(b),c=document.body.getBoundingClientRect(),e=b.getBoundingClientRect(),e.right>c.right&&(b.style.left=Math.max(0,d-e.width+window.pageXOffset)+"px"),e.bottom>c.bottom&&(b.style.top=Math.max(0,g-e.height+window.pageYOffset)+"px"));return b}
function w$menu(a,b,c,d){if(a instanceof Event){var e=a;a=e.target;w$no(e);var g={left:e.clientX,right:e.clientX,top:e.clientY,bottom:e.clientY};b||(b=a.getAttribute("w:on:"+e.type+":menu")||a.getAttribute("w:menu"))}else g=a.getBoundingClientRect(),b||(b=a.getAttribute("w:menu"));"string"==typeof b&&(b.startsWith("#")?(b=w$query(b),b=b.cloneNode(!0),b.removeAttribute("id"),b.$w||(b.$w={}),b.$w.parent=a):(e=w$data(a),b=w$use(b,e||{},null,a)));w$wmenuShow(a,b,g.left,g.right,g.top,g.bottom,c,d)}
function w$no(a){a.preventDefault();a.stopPropagation();a.cancelBubble=!0;return!1}function w$default(a){a.stopPropagation();a.cancelBubble=!0;return!1}function w$action(a,b,c){for(var d;a&&(!a.$w||!(d=a.$w.$actions));a=a.parentElement);if(!a)return null;if(d){var e=0;a:for(;e<d.length;++e){for(var g=d[e],h=a;h!=document.body;h=h.parentElement)if(!h){d.splice(e--,1);continue a}g.$do(a,b,a.$w.$,c)}}}
function w$arg(){for(var a=0,b={};a<arguments.length;++a){var c=arguments[a];if("string"==typeof c)b[c]="";else if("object"!=typeof c||!c||c instanceof HTMLElement)break;else w$assign(b,c)}c=arguments[a];for(var d=w$data(c),e=arguments[a+1].split(","),g=0;g<e.length;++g){var h=e[g].trim(),l;if(-1!=(l=h.indexOf(":"))){var k=WEAVEWORLD.weave$evalMacro(c,d,h.substring(l+1),!1);h=h.substring(0,l)}else k=d[h];"undefined"!=typeof k&&(b[h]=k)}for(a+=2;a<arguments.length;++a)c=arguments[a],"object"==typeof c&&
c&&w$assign(b,c);return b}
function w$on(a,b,c,d,e,g){function h(a,f,b){var c,d;if(-1!=(c=f.indexOf("{"))&&(0<c&&(f=f.substring(c)),c=w$data(a),-1!=f.indexOf("{{")&&(f="{"+WEAVEWORLD.weave$evalMacro(a,c,f.substring(1),!0)),"{}"!=f))try{var e=JSON.parse(f)}catch(w){console.log(w)}f=b;e&&(f=f?w$assign(f,e):e);f||(f={});if(b&&(null!=(d=w$attribute(a,"w:name"))||null!=(d=w$attribute(a,"name")))&&d){var m;a.hasAttribute("w:checked")?f[d]=a.getAttribute("w:checked"):"undefined"!=typeof(m=a.value)&&(f[d]=m)}return f}var l=c=c||a.target,
k,m=null;b="string"==typeof e?e:"on"+b;try{a:for(;c;c=!b.startsWith("on")&&c.$w&&c.$w.parent?c.$w.parent:c.parentElement){var n;if(c.getAttribute){if(n=c.getAttribute("w:on:"+b+":menu")){w$no(a);var f=h(c,n),q;-1!=(q=n.indexOf("{"))&&(n=n.substring(0,q));var t=w$data(c);m=c.getBoundingClientRect();t&&(0===Object.keys(f).length?f=t:Object.setPrototypeOf(f,t));var z=w$use(n,f,null,c);w$wmenuShow(c,z,m.left,m.right,m.top,m.bottom);return!0}if(c.hasAttribute(n="w:on:"+b+":data")){var v=c;f=h(c,n=c.getAttribute(n));
v=n&&0<n.indexOf("{")?w$find(v,n.substring(0,n.indexOf("{"))):w$find$(v);for(var x in f){var D=f[x];x.startsWith(WEAVEWORLD.W$TOGGLE)&&(x=x.substring(WEAVEWORLD.W$TOGGLE.length),v.dataset&&(D=w$toggle(w$attribute(v,"data-"+x),D)));null!=D?v.setAttribute("data-"+x,D):v.removeAttribute("data-"+x)}}if(null!=(n=w$attribute(c,"w:on:"+b+":set")))for(x in v=c,f=h(c,n,d||{}),n&&0<n.indexOf("{")&&(v=w$find(v,n.substring(0,n.indexOf("{")))),v=w$find$(v),f)D=f[x],x.startsWith(WEAVEWORLD.W$TOGGLE)&&(x=x.substring(WEAVEWORLD.W$TOGGLE.length),
v.$w.$&&(D=w$toggle(v.$w.$[x],D))),(v.$w||(v.$w={})).$[x]=D;null!=(n=w$attribute(c,"w:on:"+b+":action"))&&(v=c,f=h(c,n,{}),n&&0<(q=n.indexOf("{"))&&(v=w$find(v,n.substring(0,q))),w$action(v,a,f));if(null!=(n=w$attribute(c,"w:on:"+b))){if(!n){m=!0;break a}else if("default"==n){m=!1;break a}-1!=(q=n.indexOf("{"))&&(d=h(c,n.substring(q),d||{}),n=n.substring(0,q));m=w$on(a,n,c,d,n,!0);if(null!==m)break a}}var E=c.classList;if(E)for(x=0;x<E.length;++x){var A=E[x];if(A&&(k=WEAVEWORLD.w$type[A])&&"function"==
typeof k[b]){n=k;t=w$data(c);var r;t&&!w$isArray(t)&&(n=WEAVEWORLD.w$setPrototypeOf(t,k));if(r=k[b+"$arg"])d=w$arg(c,r,d);var p=w$checkArg(c,b,d);p?(w$warning(c),w$warning(c,p),m=void 0):m=k[b].call(n,c,a,d);if(null!==m)break a}}}null===m&&(k=WEAVEWORLD.w$type[""])&&"function"==typeof k[b]&&(n=k,(t=w$find$(c))&&(t=t.$w)&&(t=t.$)&&!w$isArray(t)&&(n=WEAVEWORLD.w$setPrototypeOf(t,k)),m=k[b].call(n,document.body,a,d));if(null!==m)return a&&(!1===m||"dragover"==a.type?(a.stopPropagation(),a.cancelBubble=
!0):"dragstart"!=a.type&&w$no(a)),m;if(!b.startsWith("on")&&!g){console.log("Can not find event handler for "+b,l);return}}catch(H){console.log("Event handling error during `"+b+"`",H)}return null}LOG=0;
function WElement(a,b,c,d){this.nodeName=a.nodeName;Object.defineProperty(this,"nodeType",{get:function(){return"#text"==this.nodeName?3:1}});if(3==a.nodeType){var e=a.textContent,g=w$says(e);this.textContent=g;e!=g&&(a.textContent=g)}else if(1==a.nodeType){a.normalize();var h;if((h=a.attributes)&&h.length){this.attributes=[];for(var l=0;l<h.length;++l){var k=h[l];e=k.value;g=w$says(e);b&&"w:define"==k.name&&(b[g]=this);this.attributes.push({name:k.name,value:w$says(g)});e!=g&&a.setAttribute(k.name,
g)}}if(a=a.firstChild)for(this.childNodes=[];e=a;)a=e.nextSibling,1==e.nodeType||3==e.nodeType?(this.childNodes.push(new WElement(e,b,c,d)),"w:else"==e.nodeName&&w$removeElement(e)):8==e.nodeType&&d&&d(w$says(e.textContent))}this.getAttribute=function(a){var b;if(b=this.attributes)for(var f=0;f<b.length;++f)if(b[f].name==a)return b[f].value;return null};this.hasAttribute=function(a){return null!=this.getAttribute(a)};this.cloneNode=function(a){if(3==this.nodeType)var b=document.createTextNode(this.textContent);
else if(1==this.nodeType){b=document.createElement(this.nodeName);var f;if(f=this.attributes)try{for(var c=0;c<f.length;++c){var d=f[c];b.setAttribute(d.name,d.value)}}catch(z){console.log(z,this)}if(a&&(f=this.childNodes))try{for(c=0;c<f.length;++c)b.appendChild(f[c].cloneNode(!0))}catch(z){console.log(z,this)}}return b}}
function WAttributeReference(a,b){this.parentElement=a;this.name=b;this.nextSibling=null;Object.defineProperty(this,"nodeType",{get:function(){return 2}});Object.defineProperty(this,"value",{get:function(){return this.parentElement.getAttribute(this.name)}})}
WEAVEWORLD=function(){function a(a){return a&&("undefined"==typeof a.length||0<a.length)}function b(a,b,f){var c;if(0==f.length)return b;if("undefined"!=f){if("null"==f)return null;if("true"==f)return!0;if("false"==f)return!1;if('""'==f||"''"==f)return"";if("0"==f)return 0;if("1"==f)return 1;if(f.match("(^([a-zA-Z_$][a-zA-Z0-9_$]*){0,1}\\\\)|(^[@a-zA-Z_$][a-zA-Z0-9_$]*)")){if(-1!=(c=f.indexOf("\\")))if(0==c)b=document.body.$w.$;else{var d=f.substring(0,c);a:for(;null!=(a=a.parentElement);){if(a==
document.body){b=a.$w.$;break}if(a.$w&&("."==d||a.classList.contains(d))){b=a.$w.$;if(-1!=(d=f.indexOf("\\",c+1))){d=f.substring(c+1,d);f=f.substring(c+1);continue a}break}}}f=f.substring(c+1);if(-1==f.indexOf("."))return b[f];a=f.split(".");b=b[a[0]];for(f=1;f<a.length;++f)c=a[f],b="object"==typeof b&&c in b?b[c]:void 0;return b}return eval(f)}}function c(c,d,f){for(var e=0,m,h=0;h<=f.length;++h){var n=f.charAt(h);if("|"==n||""==n){var g=n=m=void 0,l=c,k=d;e=f.substring(e,h);var A=0;if("!"==e.charAt(0))m=
!a(b(l,k,e.substring(1)));else{for(var r=0;r<=e.length;++r){var p=e.charAt(r);if("="==p||"!"==p||""==p)g?(A=b(l,k,e.substring(A,r)),A="undefined"!=typeof A?n==A:"undefined"==typeof n,"="==g?m="undefined"==typeof m?A:m||A:"!"==g&&(m="undefined"==typeof m?!A:m&&!A)):n=b(l,k,e.substring(A,r)),A=r+1,g=p}m="undefined"!=typeof m?m:n}if(a(m))break;e=h+1}}return m}function d(b,e,f){for(var m=0,h,n,g=0;g<=f.length;++g){var l=f.charAt(g);if("?"==l||":"==l||""==l){if(!h)n=c(b,e,f.substring(m,g));else if("?"==
h){if(a(n))return c(b,e,f.substring(m,g));if(""!=l)return d(b,e,f.substring(g+1))}else if(":"==h){if(!a(n))return c(b,e,f.substring(m,g));if(""!=l)return d(b,e,f.substring(g+1))}m=g+1;h=l}}return n}function e(a,b,f){var c;if(!f)return b;try{if(f.startsWith("[")&&-1!=(c=f.indexOf("]"))){var m=e(a,b,f.substring(c+1));-1==(c=(f=f.substring(1,c)).indexOf(" "))&&(c=f.length);var h=f.substring(0,c),g,n,k=a;for(;k;k=k.parentElement){var E=k.classList;if(E)for(var A=0;A<E.length;++A){var r=E[A];if(r&&(g=
n=l.w$type[r])&&"function"==typeof n[h])return b&&"object"==typeof b&&!Array.isArray(b)&&(g=l.w$setPrototypeOf(b,n)),m=n[h].call(g,a,m,f.substring(c+1)),m=w$proxy(m)}}if("function"==typeof(g=l.to)[h])return b&&"object"==typeof b&&!Array.isArray(b)&&(g=b),m=l.to[h].call(g,a,m,f.substring(c+1)),w$proxy(m);if("function"==typeof(g=this)[h])return b&&"object"==typeof b&&!Array.isArray(b)&&(g=b),m=this[h].call(g,m,f.substring(c+1)),w$proxy(m);console.log("Transformation `"+h+"` was not found at:",a)}return d(a,
b,f)}catch(p){throw console.log("Exception evaluating `"+f+"`:",p,a),p;}}function g(a,b,f,c){for(var d=0,m,h,g=null;-1!=(m=f.indexOf("{{",d))&&-1!=(h=f.indexOf("}}",m));)d<m&&(g=(g||"")+f.substring(d,m)),d=e(a,b,f.substring(m+2,h)),c&&(d=null!=d?JSON.stringify(d):"null"),null!=d&&(g=null!=g?String(g)+d:d),d=h+2;0==d?g=e(a,b,f):d<f.length&&(g=null!=g?String(g)+f.substring(d):f.substring(d));!1!==c&&null!=g&&"string"!=typeof g&&(g=String(g));return g}function h(a,b,f,c){if(!b||!b.length)return!1;var d=
!1,e=a.getAttribute("w:reflect"),h;e=e&&(h=Object.getPrototypeOf(f))?h[e]:null;try{for(h=0;h<b.length;++h){var q=b[h].name,m=b[h].value,n=q,k,r=!1;l.weave$currentAttr=q;if(2!==c)if(q.startsWith(k="w:attr:")){r=!0;q=q.substring(k.length);var p=g(a,f,m);e&&!1===e.call(f,a,n,p)||p!=a.getAttribute(q)&&(null!=p?a.setAttribute(q,p):a.removeAttribute(q))}else if(q.startsWith(k="w:data:"))r=!0,q="data-"+q.substring(k.length),p=g(a,f,m),e&&!1===e.call(f,a,n,p)||p!=a.getAttribute(q)&&(null!=p?a.setAttribute(q,
p):a.removeAttribute(q));else if(q.startsWith(k="w:style:"))r=!0,q=q.substring(k.length),p=g(a,f,m,!1),e&&!1===e.call(f,a,n,p)||p!=a.style[q]&&(a.style[q]=p);else if("w:text"==q)r=d=!0,p=g(a,f,m),e&&!1===e.call(f,a,n,p)||a.textContent==p||(a.textContent=p||"");else if("w:html"==q)r=d=!0,p=g(a,f,m),e&&!1===e.call(f,a,n,p)||(a.innerHTML=p||"");else if("w:show"==q)r=!0,p=g(a,f,m,!1),e&&!1===e.call(f,a,n,p)||w$show(a,p);else if("w:for"==q)r=!0,p=g(a,f,m,!1),(a.$w||(a.$w={})).$for=p;else if("w:checked"==
q&&(r=!0,p=m,!e||!1!==e.call(f,a,n,p))&&(p=w$findName(a))){p=g(a,f,p,!1);var H="OPTION"==a.nodeName?"selected":"checked";(m||"")==(p||"")?a.setAttribute(H,""):a.removeAttribute(H);break}r||1===c||("w:set"==q?(q=q.substring(k.length),p=g(a,f,m,!1),e&&!1===e.call(f,a,n,p)||("INPUT"==a.nodeName?p!=a.getAttribute("value")&&(null!=p?a.setAttribute("value",p):a.removeAttribute("value")):"SELECT"==a.nodeName&&(a.value=p),w$check(a,p||null))):q.startsWith(k="w:set:")?(q=q.substring(k.length),p=g(a,f,m,!1),
e&&!1===e.call(f,a,n,p)||(a[q]=p)):"w:warning"==q?(p=g(a,f,m),e&&!1===e.call(f,a,n,p)||(a.setCustomValidity&&a.setCustomValidity(p||""),p?a.setAttribute("w:validity",p):a.removeAttribute("w:validity"))):"w:show:for"==q?(p=g(a,f,m,!1),e&&!1===e.call(f,a,n,p)||w$show(a,w$for(a,p))):"w:enable:for"==q&&(p=g(a,f,m,!1),e&&!1===e.call(f,a,n,p)||(a.disabled=!w$for(a,p))))}}finally{l.weave$currentAttr=null}return d}var l={w$type:{"":{}},w$ajax$error:null,w$defined:{},"@time":0,"@end":0,menuStack:[],w$proxy$sets:new Set,
w$proxy$paused:new Set,w$proxy$when:0,w$proxy$AnimationFrame:null,w$process:function(a,b,f){var c=l.w$weaver[a[0]];if(!c)throw["Not found",a,{el:b,div:f}];c(a[2],b,a[3],f)},weave$current:null,W$REFRESH:!0,W$TOGGLE:"+-",W$SAY_BEGIN:"ยง",W$SAY_END:"ยง",W$SAY_CODE:"|"},k=l.w$events={holdTime:2E3,clickedTime:2E3,clickCount:0,buttons:0,mouseDownTime:0,keyDownTime:0,mouseAnchor:{x:0,y:0},mouseEvent:{},keyEvent:{},timeoutID:0,timeoutClickedID:0,target:null,setTimeOut:function(a,b){clearTimeout(k.timeoutID);
a&&(k.timeoutID=setTimeout(a,b||k.holdTime))},setTimeOutClicked:function(a,b){clearTimeout(k.timeoutClickedID);a&&(k.timeoutClickedID=setTimeout(a,b||k.clickedTime))}};document.addEventListener("keydown",function(a){k.setTimeOutClicked();k.keyDownTime=a.timeStamp;k.keyEvent=a;k.setTimeOut(function(){w$on(a,"keyhold")});w$on(a,"keydown")},!1);document.addEventListener("keyup",function(a){k.setTimeOut();w$on(a,"keyup")},!1);document.addEventListener("keypress",function(a){w$on(a,"keypress")},!1);document.addEventListener("click",
function(a){w$on(a,"click")},!1);document.addEventListener("dblclick",function(a){w$on(a,"dblclick")},!1);document.addEventListener("wheel",function(a){w$on(a,"wheel")},!1);document.addEventListener("touchstart",function(a){w$on(a,"touchstart")},!1);document.addEventListener("touchmove",function(a){w$on(a,"touchmove")},!1);document.addEventListener("mouseout",function(a){k.setTimeOut();w$on(a,"mouseout")},!1);document.addEventListener("mouseover",function(a){k.setTimeOut();w$on(a,"mouseover")},!1);
document.addEventListener("mousedown",function(a){if(500<=a.timeStamp-k.mouseDownTime||8<Math.abs(k.mouseAnchor.x-a.clientX)||8<Math.abs(k.mouseAnchor.y-a.clientY))k.clickCount=0;k.clickCount++;k.buttons=a.buttons;k.mouseDownTime=a.timeStamp;k.mouseAnchor.x=a.clientX;k.mouseAnchor.y=a.clientY;k.mouseEvent=a;w$on(a,"mousedown");k.setTimeOut(function(){w$on(a,"mousehold")});k.setTimeOutClicked();return!0},!0);document.addEventListener("mousemove",function(a){k.mouseEvent=a;"undefined"!=typeof W$MOUSEMOVE&&
W$MOUSEMOVE&&w$on(a,"mousemove");k.setTimeOut(function(){w$on(a,"mousehold")})},!1);document.addEventListener("mouseup",function(a){k.mouseEvent=a;if(w$on(a,"mouseup"))return!0;if(500>=a.timeStamp-k.mouseDownTime&&8>=Math.abs(k.mouseAnchor.x-a.clientX)&&8>=Math.abs(k.mouseAnchor.y-a.clientY)){if(w$on(a,"mouseclick"))return!0;k.setTimeOut();k.setTimeOutClicked(function(){w$on(a,"mouseclicked")},333)}else k.setTimeOut();return!0},!0);document.addEventListener("input",function(a){w$on(a,"input")},!1);
document.addEventListener("change",function(a){w$on(a,"change")},!1);document.addEventListener("dragstart",function(a){w$on(a,"dragstart")},!1);document.addEventListener("dragenter",function(a){w$on(a,"dragenter")},!1);document.addEventListener("dragover",function(a){w$on(a,"dragover")},!1);document.addEventListener("dragleave",function(a){w$on(a,"dragleave")},!1);document.addEventListener("drop",function(a){w$on(a,"drop")},!1);document.addEventListener("paste",function(a){w$on(a,"paste")},!1);document.addEventListener("contextmenu",
function(a){w$on(a,"contextmenu")},!1);l.W$HTMLTAGS="P BR B I U IMG A".split(" ");l.w$normalizeHTML=function f(a){try{for(var b=a.childNodes.length;0<=--b;){var c=a.childNodes[b];if(1==c.nodeType)if(f(c),"BR"==c.nodeName&&"DIV"==a.nodeName&&b==a.childNodes.length-1)w$removeElement(c);else if(!l.W$HTMLTAGS.includes(c.nodeName)){for("DIV"==c.nodeName&&a.insertBefore(document.createElement("BR"),c);c.childNodes.length;){var d=c.childNodes[0];1!=d.nodeType&&3!=d.nodeType||a.insertBefore(d,c)}w$removeElement(c)}}a.normalize()}catch(v){console.log(v)}return a};
l.w$weaver={eval:function(a,f,b,c){eval(a)},html:function(a,f,b,c){var d=Array.isArray(f)?f[0]:f;switch(a){case "begin":l["@end"]=0;break;case "end":l["@end"]=1;break;case "open":b&&b.url?location=b.url:location.reload();break;case "text":for(a=0;a<f.length;++a)d=f[a],d.textContent=b.$;break;case "html":for(a=0;a<f.length;++a)d=f[a],d.innerHTML=b.$;break;case "attr":for(a=0;a<f.length;++a){d=f[a];for(var e in b)d.setAttribute(e,b[e])}break;case "prop":for(a=0;a<f.length;++a)for(e in d=f[a],b)d[e]=
b[e];break;case "style":for(a=0;a<f.length;++a)for(e in d=f[a],b)c=b[e],null!=c?d.style[e]=c:d.style.removeProperty(e);break;case "validity":LOG&&console.log("validity",f);for(a=0;a<f.length;++a)d=f[a],d.setCustomValidity(b.message);break;case "remove":for(a=0;a<f.length;++a)d=f[a],w$removeElement(d);break;case "content":for(f=c?c.childNodes:[];0<d.childNodes.length;)w$removeElement(d.firstChild);for(;0<f.length;)d.appendChild(f[0]);break;case "addBegin":f=c?c.children:[];for(b=d.firstElementChild;0<
f.length;)d.insertBefore(e=f[0],b),b=e;break;case "addEnd":for(f=c?c.children:[];0<f.length;)d.appendChild(f[0]);break;case "addBefore":f=c?c.children:[];b=d;for(d=d.parentElement;0<f.length;)d.insertBefore(e=f[0],b),b=e;break;case "addAfter":f=c?c.children:[];b=d.nextSibling;for(d=d.parentElement;0<f.length;)d.insertBefore(e=f[0],b),b=e;break;case "replace":f=c?c.children:[];b=d;for(d=d.parentElement;0<f.length;)d.insertBefore(e=f[0],b),b=e;d.removeChild(b)}},open:function(a,f,b,c){location.reload()}};
l.w$receive=function(a,f){if(a)if("string"==typeof a)for(var b=a.indexOf("\x3c!--[");-1!=b;){var c=b+4,d=a.indexOf("]--\x3e",c),e=a.substring(c,d+1);b=a.indexOf("\x3c!--[",d+4);if("[]"!=e)try{var g=JSON.parse(e),h=g[1]?w$queryAll(g[1]):document.body,k;e=null;var n;(k=g[4])&&l["@time"]<(k=Number(k))&&(l["@time"]=k);if("\x3c!--[]--\x3e"==a.substring(b,b+9)&&(n=a.substring(d+4,b).trim())){e=document.createElement("DIV");if(n.startsWith("<td")||n.startsWith("<tr")){var r=document.createElement("TABLE");
e.appendChild(r);e=r}n.startsWith("<td")&&(n="<tr>"+n+"</tr>");e.innerHTML=n;if(n.startsWith("<td")||n.startsWith("<tr"))e=e.tBodies[0];n.startsWith("<td")&&(e=e.rows[0])}l.w$process(g,h,e)}catch(p){console.log("EXCEPTION:",a.substring(c-4,-1!=b?b:a.length),p)}}else f.w$element&&w$weave(f.w$element,f.w$cmd,a,f.weave$data)};l.to={"?":function(a,f,b){"true"==b?b=!0:"1"==b?b=1:""===b?b=!0:b.startsWith("'")&&"'"==b.charAt(b.length-1)&&(b=b.substring(1,b.length-2));return w$is(f,b)},"??":function(a,b,
c){c.startsWith("'")&&"'"==c.charAt(c.length-1)&&(c=c.substring(1,c.length-2));return w$is(b,c)},"?1":function(a,b,c){return w$is(b,1)},"!":function(a,b,c){"true"==c?c=!0:"1"==c?c=1:""===c?c=!0:c.startsWith("'")&&"'"==c.charAt(c.length-1)&&(c=c.substring(1,c.length-2));return w$toggle(b,c)},"!!":function(a,b,c){c.startsWith("'")&&"'"==c.charAt(c.length-1)&&(c=c.substring(1,c.length-2));return w$toggle(b,c)},"!1":function(a,b,c){return w$toggle(b,1)},"{}":function(a,b,c){return c&&c.trim()?w$arg(a,
c):{}}};l.weave$evalMacro=g;l.w$apply=function x(b,c,d,g,k){var f=c=w$proxy(c),q=l.weave$current;l.weave$currentAttr=null;try{if(2==b.nodeType)return h(l.weave$current=b.parentElement,[b],c,0),b;l.weave$current=b;if(null==d)if(b.$w&&b.$w.w$)d=b.$w.w$,g||(g=!0);else{if(g)throw["Not woven Element",b];d=b;b=d.cloneNode(!1);(b.$w||(b.$w={})).w$=d;d.parentElement.replaceChild(b,d)}else(b.$w||(b.$w={})).w$=d;if(k){var t=d.childNodes;g=d=null;var r;var p=-1;var v=k;do for(var u=d||0;u<(null!=g?g:t?t.length:
0);++u){var B=t[u],z=!1;f=c;if(1==B.nodeType)if("W:ELSE"==B.nodeName)break;else if(B.hasAttribute("w:item")&&!B.getAttribute("w:item")){if(null==d){d=r=u;g=u+1;v=null;for(var F=u+1;F<t.length;++F){var C=t[F];1==C.nodeType&&C.hasAttribute("w:item")&&!C.getAttribute("w:item")&&(r=F,g==u+1&&(g=F))}}++p>=k.$$.length-1&&(d=g=null,u=r);if(p<k.$$.length)f=k.$$[p],z=!0;else continue}var I,w=z&&k.w$map.get(f);(I=!!w)?B=w.$w.w$:w=B.cloneNode(!1);b.appendChild(w);z&&((w.$w||(w.$w={})).$$index=p,k.w$map.set(f,
w));C=x(w,f,B,I,v)}while(null!=d&&d<(null!=g?g:t.length))}else if(1==b.nodeType){k=function(a,b){var c;if(c=a.getAttribute("w:use")){var d=l.w$defined[c];if(!d)throw"w:define `"+c+"` was not found";for(c=0;c<d.attributes.length;++c){var f=d.attributes[c];"w:define"!=f.name&&(a.hasAttribute(f.name)||a.setAttribute(f.name,f.value))}b=d.childNodes}return b};if((null!=(p=b.getAttribute("w:at"))||null!=(p=b.getAttribute("w:named"))||null!=(p=b.getAttribute("w:name")))&&p)for(r="$at$"+p,w=b;w;w=w.parentElement){var y=
w.classList;if(y&&y.length)for(u=0;u<y.length;++u){var K;if((K=l.w$type[y[u]])&&r in K){var L=(w.$w||(w.$w={})).$actions||(w.$w.$actions=[]);a:{for(C=0;C<L.length;++C)if(L[C].el==b)break a;L.push({el:b,$do:K[r]})}}}}var G=b.getAttribute("w:each");v=b.getAttribute("w:item");var J=b.getAttribute("w:if");r=!0;C=!1;t=d.childNodes;if(null!=G){y=f;null!=J&&(r=a(e(b,c,J)));if(r){if(y=-1===g?b.$w.$$:e(b,y,G),w$isArray(y)&&null!=(p=b.getAttribute("w:when"))){G=[];for(u=0;u<y.length;++u)a(e(b,y[u],p))&&G.push(y[u]);
y=w$proxy(G)}}else y=null;w$isArray(y)||(y=w$proxy([]));""!==v&&(p=b.getAttribute("w:type"))&&(y=l.w$setPrototypeOf(y,w$type[p]));b.$w.$$=y;g&&b.$w.w$map||(b.$w.w$map=new Map);for(;b.firstChild;)w$removeElement(b.firstChild);if(!(C=r=!!y.length))for(C=r=!0,u=0;u<t.length;++u)if("W:ELSE"==t[u].nodeName){C=r=!1;break}if(r)if(""===v)for(u=0;u<y.length;++u)w=g&&b.$w.w$map&&b.$w.w$map.get(y[u]),(I=!!w)||(w=b.cloneNode(!1),w.removeAttribute("w:each"),b.$w.w$map.set(y[u],w)),b.appendChild(w),x(w,y[u],d,
I);else t=k(b,t),h(b,b.attributes,c,1),x(b,c,d,g,b.$w)}else{if(null!=v){f=-1===g?b.$w.$:e(b,f,v);if(p=b.getAttribute("w:type"))f=l.w$setPrototypeOf(f,l.w$type[p]);b.$w.$=f;f.$original||(f.$w$direct$$original=w$assign({},f))}null!=(p=w$attribute(b,"w:named"))?C|=l.w$named(b,f,p):null!=(p=w$attribute(b,"w:name"))&&(C|=l.w$name(b,f,p,!0));t=k(b,t);C|=h(b,b.attributes,f,1);null!=J&&(r=a(e(b,c,J)),g=!1,b.$w.$if=r)}if(!C&&t){if(!r){for(u=0;u<t.length;++u)if(B=t[u],"W:ELSE"==B.nodeName){r=B;t=B.childNodes;
break}for(r||(t=null);b.lastChild;)w$removeElement(b.lastChild)}if(t){z=b.childNodes;if(g&&(g=t.length==z.length))for(u=0;u<z.length;++u)if(!(F=z[u]).$w||F.$w.w$!=t[u]){g=!1;break}if(g)for(t=z,u=0;u<t.length;++u)B=t[u],x(B,f,B.$w.w$,!0);else{for(;b.lastChild;)w$removeElement(b.lastChild);for(u=0;u<t.length;++u){B=t[u];if("W:ELSE"==B.nodeName)break;w=b.appendChild(B.cloneNode(!1));x(w,f,B)}}}}b.attributes&&h(b,b.attributes,f,2);b.$w.$actions&&(w$action(b,null,b.$w.$),LOG&&console.log(b.$w.$actions))}1==
b.nodeType&&b.classList.remove("w")}finally{l.weave$current=q,l.weave$currentAttr=null}return b};l.w$setPrototypeOf=function(a,b){if(!b||!a||"object"!=typeof a||Array.isArray(a)||Object.getPrototypeOf(a)===b||b.isPrototypeOf(a))return a;if("undefined"==typeof Proxy){if(Object.getPrototypeOf(a)==Object.prototype)return Object.setPrototypeOf(a,b)}else Object.setPrototypeOf(a=w$proxy(a),b);return a};l.css=function(a){l.w$STYLE||(l.w$STYLE=w$element("style",{name:"w:css"}),l.w$STYLE.appendChild(document.createTextNode("")),
document.head.appendChild(l.w$STYLE));if("string"==typeof a){var b=l.w$STYLE.sheet;b.insertRule(a,b.length?b.length:0)}return l.w$STYLE};l.jsonTransfer=function(a,b){if("undefined"==typeof b){var c=a.dataTransfer&&a.dataTransfer.getData("application/json")||W$DATATransfer;return"string"==typeof(c=W$DATATransfer)&&c?JSON.parse(c):c}a.dataTransfer.setData("application/json",W$DATATransfer=b);return a.dataTransfer};l.w$for=function(a){if("string"==typeof a&&a)switch(a.charAt().toLowerCase()){case "0":case "-":return 0;
case "r":case "g":return 2;case "a":return 6;case "u":return 7;case "s":case "w":case "+":return 8;case "d":case "*":return 9}return 5};l.w$name=function(a,b,c,d){var e=a.nodeName,f,g,h,l=!1,k=-1!=(h=c.indexOf("{"))?c.substring(0,h):c;k&&!a.hasAttribute("name")&&a.setAttribute("name",k);k.startsWith("!")&&(k=k.substring(1));"undefined"!=typeof(h=g=b[k+"$type"])&&("boolean"==h?h="checkbox":"string"==h?h="text":"html"==h?h="text":"integer"==h&&(h="number"));(b[f=k+"$hint"]||b[f=k+"$title"])&&a.setAttribute("w:attr:title",
c);if("FORM"==e)a.hasAttribute("accept-charset")||a.hasAttribute("w:attr:accept-charset")||a.setAttribute("accept-charset","utf-8"),a.hasAttribute("onsubmit")||(a.setAttribute("onsubmit","return w$submit(event)"),a.hasAttribute("w:on:onsubmit")||a.setAttribute("w:on:onsubmit",c));else if("BUTTON"==e)(f=b[k+"$definition"])&&w$defineElement(a,f),a.hasAttribute("onclick")||a.hasAttribute("w:on:onclick")||a.setAttribute("w:on:onsubmit",c),"undefined"==typeof b[f=k+"$for"]||a.hasAttribute("disabled")||
a.hasAttribute("w:attr:disabled")||a.hasAttribute("w:enable:for")||a.setAttribute("w:enable:for",f);else if("SELECT"==e){if(f=b[k+"$definition"])l=!0,w$defineSelect(a,f);(f=k+"$required")in b&&!a.hasAttribute("required")&&!a.hasAttribute("w:attr:required")&&a.setAttribute("w:attr:required","[??]"+f);a.hasAttribute("w:attr:value")||a.hasAttribute("w:set:value")||a.hasAttribute("w:set")||a.setAttribute("w:set",k);"undefined"==typeof b[f=k+"$for"]||a.hasAttribute("disabled")||a.hasAttribute("w:enable:for")||
a.setAttribute("w:enable:for",f);d&&(k+"$check"in b||k+"$valid"in b)&&!a.hasAttribute("onchange")&&!a.hasAttribute("w:on:onchange")&&a.setAttribute("onchange","w$no(event); w$check(this); return false;");a.hasAttribute("w:warning")||a.setAttribute("w:warning",k+"$warning")}else if("INPUT"==e){c=b[k+"$length"];if("string"==typeof c&&c&&-1!=(h=c.indexOf(","))){var p=c.substring(h+1);c=c.substring(0,h)}"undefined"==typeof h||a.hasAttribute("type")||a.setAttribute("type",h);"string"==g&&(a.hasAttribute(f=
"autocorrect")||a.hasAttribute("w:attr:autocorrect")||a.setAttribute(f,"off"),a.hasAttribute(f="autocapitalize")||a.hasAttribute("w:attr:autocapitalize")||a.setAttribute(f,"off"),a.hasAttribute(f="spellcheck")||a.hasAttribute("w:attr:spellcheck")||a.setAttribute(f,"false"));(f=b[f=k+"$definition"])&&w$defineElement(q,f);(f=k+"$required")in b&&!a.hasAttribute("required")&&!a.hasAttribute("w:attr:required")&&a.setAttribute("w:attr:required","[??]"+f);"undefined"==typeof b[f=k+"$placeholder"]||a.hasAttribute("placeholder")||
a.hasAttribute("w:attr:placeholder")||a.setAttribute("w:attr:placeholder",f);if("button"==a.type||"submit"==a.type){var q;for(q=a;q&&"FORM"!=q.nodeName;q=q.parentElement);LOG&&console.log("FORM",q,a);"undefined"==typeof b[f=k+"$for"]||a.hasAttribute("disabled")||a.hasAttribute("w:enable:for")||a.setAttribute("w:enable:for",f)}else"checkbox"==a.type||"radio"==a.type?(h=w$attribute(a,"value"),!k||a.hasAttribute("checked")||a.hasAttribute("w:attr:checked")||a.hasAttribute("w:set:checked")||(null!=h?
a.setAttribute("w:attr:checked",k+"='"+h+"'?'checked':null"):a.setAttribute("w:attr:checked",k+"?'checked':null"))):(a.hasAttribute("w:attr:value")||a.hasAttribute("w:set:value")||a.hasAttribute("w:set")||a.setAttribute("w:set",k),"number"==a.type||"date"==a.type?((f=k+"$min")in b&&!a.hasAttribute("min")&&!a.hasAttribute("w:attr:min")&&a.setAttribute("w:attr:min",f),a.hasAttribute("max")||a.hasAttribute("w:attr:max")||((f=k+"$max")in b?a.setAttribute("w:attr:max",f):c&&a.setAttribute("max",Math.pow(10,
c-p)-1)),"number"!=a.type||a.hasAttribute("step")||a.hasAttribute("w:attr:step")||(p?a.setAttribute("step",Math.pow(10,-p)):(f=k+"$step")in b?a.setAttribute("w:attr:step",f):"integer"!=g&&a.setAttribute("step","any"))):(a.hasAttribute("size")||a.hasAttribute("w:attr:size")||((f=k+"$size")in b?a.setAttribute("w:attr:size",f):c&&a.setAttribute("size",c)),!c||a.hasAttribute("maxlength")||a.hasAttribute("w:attr:maxlength")||a.setAttribute("maxlength",c),(f=k+"$pattern")in b&&!a.hasAttribute("pattern")&&
!a.hasAttribute("w:attr:pattern")&&a.setAttribute("w:attr:pattern",f)));d&&(k+"$check"in b||k+"$valid"in b)&&!a.hasAttribute("oninput")&&!a.hasAttribute("w:on:oninput")&&a.setAttribute("oninput","w$no(event); w$check(this); return false;");a.hasAttribute("w:warning")||a.setAttribute("w:warning",k+"$warning")}else"radio"!=a.getAttribute("type")&&("html"==g?(a.classList.contains("whtml")||a.classList.add("whtml"),a.hasAttribute("w:html")||a.hasAttribute("w:text")||a.setAttribute("w:html",f)):"text"==
g&&(a.classList.contains("wtext")||a.classList.add("wtext"),a.hasAttribute("w:html")||a.hasAttribute("w:text")||a.setAttribute("w:text",f)));return l};l.w$named=function(a,b,c){var d=a.nodeName,e;c=-1!=(e=c.indexOf("{"))?c.substring(0,e):c;b=l.w$name(a,b,c);"INPUT"==d?"button"!=a.type&&"submit"!=a.type&&"reset"!=a.type&&(a.hasAttribute("w:on:oninput:action")||a.setAttribute("w:on:oninput:action","{}"),a.hasAttribute("oninput")||a.hasAttribute("w:on:oninput")||a.setAttribute("w:on:oninput","")):"SELECT"==
d&&(a.hasAttribute("w:on:onchange:action")||a.setAttribute("w:on:onchange:action","{}"),a.hasAttribute("onchange")||a.hasAttribute("w:on:onchange")||a.setAttribute("w:on:onchange",""));return b};return l}();function w$for(a,b){if(a instanceof HTMLElement){var c=a,d;for(a=void 0;c&&(!(d=c.$w)||!(a=d.$for));c=c.parentElement);}c=WEAVEWORLD.w$for(a);d=WEAVEWORLD.w$for(b);return c>=d}
function w$form(a){var b={},c=function(a,b,d){var e,f;-1!=(e=b.indexOf("."))?("object"!=typeof(f=a[b.substring(0,e)])&&(a[b.substring(0,e)]=f={}),c(f,b.substring(e+1),d)):"undefined"!=typeof d?a[b]=d:"undefined"==typeof a[b]&&(a[b]=null)};if(a&&"FORM"==a.nodeName){for(var d=a.elements,e=a.getAttribute("w:submit"),g=0;g<d.length;g++){var h=d.item(g);"radio"!=h.type&&"checkbox"!=h.type||h.checked?null!=e&&"submit"==h.type&&h.name&&h.name!=e||h.name&&c(b,h.name,h.value):h.name&&c(b,h.name,void 0)}w$queryAll("div[contenteditable='true']",
a,function(a){var d;if(d=a.getAttribute("name"))a=WEAVEWORLD.w$normalizeHTML(a).innerHTML,c(b,d,a)})}return b}function w$submit(a){var b=a.target,c=w$form(b);if(null===w$on(a,"submit",b,c))throw new ReferenceError("Event handler for w:on:onsubmit was not found");return w$no(a)}function w$find$(a){for(;a&&!(a.$w&&"$"in a.$w);a=a.parentElement);return a}function w$find$$(a){for(;a&&(!a.$w||!a.$w.$$);a=a.parentElement);return a}
function w$find$$index(a){a=w$find$(a);var b=a.$w.$,c;if(!(c=w$find$$(a)))return null;var d=c.$w.$$;return{$$:d,$:b,el:a,e:c,index:d.indexOf(b)}}function w$findName(a){for(;a;a=a.$w&&a.$w.parent||a.parentElement){var b;if(null!=(b=w$attribute(a,"w:name"))||null!=(b=w$attribute(a,"name")))return void 0==b.indexOf("{")!=-1&&(b=b.substring(0,void 0).trim()),b}return null}function w$data(a,b,c){if(b)return a=w$find(a,b,c),a.$w?a.$w.$:void 0;var d;return(d=w$find$(a))&&(d=d.$w)&&"$"in d?d.$:void 0}
function w$list(a,b,c){if(b)return a=w$find(a,b,c),a.$w?a.$w.$$:void 0;var d;return(d=w$find$$(a))&&(d=d.$w)&&"$$"in d?d.$$:void 0}function w$findRule(a,b){for(;a;a=a.parentElement){var c=a.classList;if(c)for(var d=0;d<c.length;++d){var e;if((e=WEAVEWORLD.w$type[c[d]])&&b in e)return e[b]}}}
function w$use(a,b,c,d){var e=WEAVEWORLD.w$defined[a];if(!e)throw new ReferenceError("w:define `"+a+"` was not found");a=e.cloneNode(!1);a.removeAttribute("w:define");c?c.insertBefore(a,d):d&&((a.$w||(a.$w={})).parent=d);WEAVEWORLD.w$apply(a,b,e);return a}function w$merge(a,b){a instanceof HTMLElement&&(a=w$data(a));if(b&&"object"==typeof b){var c,d;for(d in b)(c=b[d])&&"object"==typeof c&&!w$isArray(c)?w$merge(a[d],c):a[d]=c}return a}
function w$weave(a,b,c,d){var e;"undefined"==typeof b&&(b="");"undefined"!=typeof d&&(b.endsWith(":")&&("object"!=typeof c||0===Object.keys(c).length&&c.constructor===Object)||(c=d));a||(a=document.body);d=WEAVEWORLD.W$REFRESH;var g="object"==typeof c&&c&&!w$isArray(c);b.startsWith("~")?(b=b.substring(1),d=!1):(w$warning(a),b.startsWith("!")&&(b=b.substring(1),d=!0));switch(b){case "[":case "]":c&&(a=w$find$$(a))&&("["==b?a.$w.$$.unshift(c):a.$w.$$.push(c),g&&w$warning(a,c),d&&w$refresh("now",a));
break;case "<":case ">":!(e=w$find$$index(a))||">"!=b&&-1==e.index||(e.$$.splice("<"==b?e.index:e.index+1,0,c),g&&w$warning(e.e,c),d&&w$refresh("now",e.e));break;case "-":(e=w$find$$index(a))&&-1!=e.index&&(e.$$.splice(e.index,1),g&&w$warning(e.e,c),d&&w$refresh("now",e.e));break;case "#":if(a=w$find$$(a))w$isArray(c)||(c=w$proxy([])),Array.prototype.splice.apply(a.$w.$$,[0,a.$w.$$.length].concat(c)),g&&w$warning(a,c),d&&w$refresh("now",a);break;case ".":(e=w$find$$index(a))&&-1!=e.index&&(e.$$[e.index]=
c,e.el.$w.$=c,g&&w$warning(e.el,c),d&&w$refresh("now",e.el));break;case "=":if(a=w$find$(a))a.$w.$=c,g&&w$warning(a,c),w$refresh("now",a);break;case "?":(a=w$find$(a))&&g&&w$warning(a,c);break;default:if(a=w$find$(a))"object"==typeof c&&w$merge(a.$w.$,c),g&&w$warning(a,c),d&&w$refresh("now",a)}return a}
w$refresh=function(a,b,c){cancelAnimationFrame(WEAVEWORLD.w$proxy$AnimationFrame);WEAVEWORLD.w$proxy$AnimationFrame=null;var d;if(d="now"==a)a=b,b=c;if("number"==typeof a){if(performance.now()<WEAVEWORLD.w$proxy$when){WEAVEWORLD.w$proxy$AnimationFrame=requestAnimationFrame(w$refresh);return}}else if(a){if(a instanceof HTMLElement){WEAVEWORLD.w$proxy$sets.add(a);var e;if(b&&a.$w&&(e=a.$w.$))for(var g in b)e[g]=b[g]}else a instanceof Set&&a.forEach(function(a,b,c){a.parentElement&&WEAVEWORLD.w$proxy$sets.add(a)});
if(!d){WEAVEWORLD.w$proxy$when=performance.now()+10;WEAVEWORLD.w$proxy$AnimationFrame=requestAnimationFrame(w$refresh);return}}a=WEAVEWORLD.w$proxy$sets;a.size&&(a.forEach(function(b,c,d){if(c=b.parentElement){for(;c;c=c.parentElement)if(a.has(c)||WEAVEWORLD.w$proxy$paused.has(c))return;if(c=w$find$(b))LOG&&console.log("--------\x3e",b,c.$w.$),WEAVEWORLD.w$apply(b,c.$w.$,null,-1)}}),WEAVEWORLD.w$proxy$sets.clear())};
w$proxyHandler=function(a){this.$w$={};this.setPrototypeOf=function(a,c){if(!c||!a||"object"!=typeof a||Array.isArray(a)||Object.getPrototypeOf(a)===c||c.isPrototypeOf(a))return a;var b=this.$w$prototype||(this.$w$prototype=[]);b.includes(c)||b.push(c);return!0};this.getPropertyDescriptor=function(a,c){for(var b,e=a;e;e=Object.getPrototypeOf(e))if(b=Object.getOwnPropertyDescriptor(e,c))return b;if(this.$w$prototype)for(var g=0;g<this.$w$prototype.length;++g)for(e=this.$w$prototype[g];e;e=Object.getPrototypeOf(e))if(b=
Object.getOwnPropertyDescriptor(e,c))return b};this.has=function(a,c){if(c in a)return!0;if(this.$w$prototype)for(var b=0;b<this.$w$prototype.length;++b)if(c in this.$w$prototype[b])return!0;return!1};this.get=function(a,c){if("symbol"==typeof c)return a[c];if("$w$proxy"==c)return this.$w$proxy;if("$w$object"==c)return a;if("$w$"==c)return this.$w$;if("$w$isArray"==c)return Array.isArray(a);var b=this.getPropertyDescriptor(a,c);WEAVEWORLD.weave$current&&(this.$w$[" "+c]||(this.$w$[" "+c]=new Set)).add(WEAVEWORLD.weave$currentAttr?
new WAttributeReference(WEAVEWORLD.weave$current,WEAVEWORLD.weave$currentAttr):WEAVEWORLD.weave$current);b=b?b.get?b.get.call(this.$w$proxy):b.value:a[c];return null===b||"object"!=typeof b||b.$w$proxy?b:a[c]=w$proxy(b)};this.set=function(a,c,d){var b;c.startsWith("$w$direct$")?c=c.substring(10):(LOG&&console.log("SET:"+c+"=",d,b),this.$w$&&(b=this.$w$[" "+c])&&b.size&&(delete this.$w$[" "+c],w$refresh(b)));var g;for(b=a;b&&!(g=Object.getOwnPropertyDescriptor(b,c));b=Object.getPrototypeOf(b));g&&
g.set?g.set.call(this.$w$proxy,w$proxy(d)):a[c]=w$proxy(d);return!0}};function w$proxy(a){if(null===a||"object"!=typeof a||a.$w$proxy||"undefined"==typeof Proxy)return a;var b=new w$proxyHandler(a);a=new Proxy(a,b);return b.$w$proxy=a}
function w$say(a,b){var c,d,e,g;if(g="undefined"==typeof b)b=a;if(-1!=(d=a.indexOf(c=WEAVEWORLD.W$SAY_CODE))){if(0==d)return a.substring(c.length);b=a.substring(d+c.length);a=a.substring(0,d)}"undefined"!=typeof W$DICTIONARY&&null!=(e=W$DICTIONARY[a])?b=e:g&&console.log("SAY:"+a+":");return b}
function w$says(a){var b,c,d,e;if(!a||-1==(b=a.indexOf(c=WEAVEWORLD.W$SAY_BEGIN)))return a;for(var g="";-1!=b&&-1!=(j=a.indexOf(d=WEAVEWORLD.W$SAY_END,b+c.length));){var h=a.substring(b+c.length,j),l,k,m=h;0<(l=h.indexOf(e=WEAVEWORLD.W$SAY_CODE))&&(m=h.substring(l+e.length),h=h.substring(0,l));0==l?m=h.substring(l+e.length):"undefined"!=typeof W$DICTIONARY&&null!=(k=W$DICTIONARY[h])?m=k:console.log("SAY:"+h+":");g+=a.substring(0,b)+m;b=(a=a.substring(j+d.length)).indexOf(c)}return g+a}
function w$define(a,b){var c;if(w$isArray(a))for(c=0;c<a.length;++c)w$define(a[c]);else{if("string"==typeof a&&"undefined"==typeof b)return WEAVEWORLD.w$type[a];"string"==typeof a&&(c=a,a=b);if("object"!=typeof a)throw Error("Invalid w$define arguments.",arguments);if("undefined"==typeof c&&(c=a.$name,"string"!=typeof c))throw Error("Invalid w$define arguments: no name.",arguments);var d=WEAVEWORLD.w$type[c];if("string"==typeof a.$type&&a.$type){if(d)throw Error("Invalid w$define redefinition: base $type defined, too.",
arguments);if(!(d=WEAVEWORLD.w$type[a.$type]))throw Error("w$define base $type was not found.",arguments);}else d||(d=WEAVEWORLD.w$type[""]);d&&Object.setPrototypeOf(a,d);WEAVEWORLD.w$type[c]=a}}
document.addEventListener("DOMContentLoaded",function(){function a(a,b){W$DATA=w$proxy(a);"function"==typeof b&&b.call(this,W$DATA);WEAVEWORLD.w$apply(document.body,W$DATA,null,!0);if("object"==typeof W$ONLOAD&&Array.isArray(W$ONLOAD))for(var c=0;c<W$ONLOAD.length;++c)W$ONLOAD[c].call(WEAVEWORLD);"function"==typeof W$SYNC&&W$SYNC()}WEAVEWORLD.w$defined={};var b="",c="",d;document.body.$w={w$:new WElement(document.body,WEAVEWORLD.w$defined,w$say,function(a){a.startsWith(d="!w:css!")?b+="\n"+a.substring(d.length):
a.startsWith(d="!w:script!")&&(c+="\n"+a.substring(d.length))})};b&&document.head.appendChild(w$element("style",{name:"!w:css","w:text":b+"\n"}));c&&document.head.appendChild(w$element("script",{name:"!w:script","w:text":c+"\n"}));"undefined"!=typeof W$DATA?a(W$DATA,"undefined"!=typeof W$START?W$START:null):"function"==typeof W$START?a(w$getParameters(),W$START):"string"==typeof W$START?W$CALL(W$START,w$getParameters(),function(b){a(b)}):document.body.classList.remove("w")});
Object.defineProperty(window,"W$TYPE",{configurable:!0,get:function(){return WEAVEWORLD.w$type},set:function(a){w$define(a)}});W$SYNC=W$START=W$DATA=void 0;W$ONLOAD=[];